<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHile/DO LOOP</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
 
</head>
<body>
    <script>
        const queries = [
                {
                    id: 1, student: "Genesis",
                    query: "Permission to absent from tech class",
                    status: "APPROVED"
                },
                {
                    id: 2, student: "Nunya",
                    query: "Permission to Absa Hackathon",
                    status: "APPROVED"
                },
                {
                    id: 3, student: "Fleur",
                    query: "Permission to shoot film",
                    status: "DECLINED"
                },
                {
                    id: 4, student: "Delight",
                    query: "Need some delightful time to cool off",
                    status: "DECLINED"
                },
                {
                    id: 5, student: "Sila",
                    query: "Permission to participate in Absa Hackathon",
                    status: "PENDING"
                },
            ]

        window.onload = createTable();
        function createTable() {
            
            h2 = document.createElement('h2')
            h2.textContent = 'Welcome Maku!, you have some permissions to review'
            document.body.appendChild(h3)

            table_header = ['Id', 'Student', 'Query', 'Status', 'Action']
            table = document.createElement('table')
            table.setAttribute('class', 'table table-striped')

            thead = document.createElement('thead')
            tr_head = document.createElement('tr')

            // writing the heading of the table
            table_header.forEach(element => {
                th = document.createElement('th')
                th.textContent = element
                tr_head.appendChild(th)
            });

            // append tr to thead 
            thead.appendChild(tr_head)

            // writing the tbody
            tbody = document.createElement('tbody')
            
            // Using Do while  
            let iteration = 0
            do {
                tr = createRow(queries[iteration])
                tbody.appendChild(tr)
                iteration++;
            } while (iteration < queries.length);


            // We stick everything to table and after to the document 
            table.appendChild(thead)
            table.appendChild(tbody)
            document.body.appendChild(table)
            
        }


        function createRow(item) {
            tr = document.createElement('tr')
            
            // Using While Loop
            let i = 0
            while (i < Object.keys(item).length) {
                td = document.createElement('td')
                td.textContent = item[Object.keys(item)[i]]

                // console.log(item[Object.keys(item)[i]])
                tr.appendChild(td)
                i++;
            }
            
            td = document.createElement('td')
            td.innerHTML = `
                        <button class="btn btn-outline-primary">Approve</button>
                        <button class="btn btn-outline-danger">Decline</button> 
                            `
            tr.appendChild(td)

            return tr 
        }
    </script>
</body>
</html>